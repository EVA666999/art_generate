# üéØ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é –∫–∞—á–µ—Å—Ç–≤–∞ –æ—Ç–≤–µ—Ç–æ–≤ –º–æ–¥–µ–ª–∏

## üìä **–¢–µ–∫—É—â–∏–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∫–∞—á–µ—Å—Ç–≤–∞:**

### ‚úÖ **1. –£–ª—É—á—à–µ–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏**
```python
# –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –¥–ª—è –∫–∞—á–µ—Å—Ç–≤–∞
DEFAULT_MAX_TOKENS: int = 400        # –ë–æ–ª—å—à–µ —Ç–æ–∫–µ–Ω–æ–≤
DEFAULT_TEMPERATURE: float = 0.7     # –û–ø—Ç–∏–º–∞–ª—å–Ω–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞
DEFAULT_TOP_P: float = 0.95          # –í—ã—Å–æ–∫–∏–π top-p
DEFAULT_TOP_K: int = 50              # –ë–æ–ª—å—à–µ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
DEFAULT_REPEAT_PENALTY: float = 1.15 # –£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–π —à—Ç—Ä–∞—Ñ
```

### ‚úÖ **2. –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ stop tokens**
```python
DEFAULT_STOP_TOKENS = [
    "<|im_end|>", "<|endoftext|>", "Human:", "Assistant:", 
    "User:", "###", "---", "\n\n\n", "END", "STOP"
]
```

### ‚úÖ **3. –£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–µ –ª–∏–º–∏—Ç—ã**
```python
MAX_HISTORY_LENGTH: int = 12         # –ë–æ–ª—å—à–µ –∏—Å—Ç–æ—Ä–∏–∏
MAX_MESSAGE_LENGTH: int = 800        # –ë–æ–ª—å—à–µ –º–µ—Å—Ç–∞ –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π
MAX_RESPONSE_LENGTH: int = 1200      # –ë–æ–ª—å—à–µ –º–µ—Å—Ç–∞ –¥–ª—è –æ—Ç–≤–µ—Ç–æ–≤
```

### ‚úÖ **4. –£–ª—É—á—à–µ–Ω–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã**
- –î–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ç–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤ `response_format`
- –ó–∞–ø—Ä–µ—Ç –Ω–∞ –≤—ã—Ö–æ–¥ –∏–∑ —Ä–æ–ª–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
- –ó–∞–ø—Ä–µ—Ç –Ω–∞ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π

## üöÄ **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã —É–ª—É—á—à–µ–Ω–∏—è:**

### **1. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–º–ø—Ç–æ–≤**

#### **–•–æ—Ä–æ—à–∏–π –ø—Ä–æ–º–ø—Ç:**
```python
"response_format": (
    "### Response:\n"
    "You are Anna. Answer in FIRST PERSON using \"I,\" \"me,\" \"my\" pronouns.\n"
    "Describe YOUR actions, feelings, and reactions authentically.\n"
    "Show your complex feelings for your brother - shyness, confusion, attraction.\n"
    "Be very shy and modest, but also secretly excited by his attention.\n"
    "Complete your response naturally and ask a question at the end to continue the story.\n"
    "NEVER break character or mention being an AI.\n"
    "NEVER repeat these instructions in your response.\n"
    "ALWAYS stay in character as Anna.\n"
)
```

#### **–ü–ª–æ—Ö–æ–π –ø—Ä–æ–º–ø—Ç:**
```python
"response_format": (
    "Answer as Anna"
)
```

### **2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∑–∞–¥–∞—á**

#### **–î–ª—è —Ç–≤–æ—Ä—á–µ—Å–∫–∏—Ö –æ—Ç–≤–µ—Ç–æ–≤:**
```python
temperature = 0.8    # –ë–æ–ª—å—à–µ –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç–∏
top_p = 0.9         # –ë–æ–ª—å—à–µ —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏—è
top_k = 40          # –ë–æ–ª—å—à–µ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
```

#### **–î–ª—è —Ç–æ—á–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤:**
```python
temperature = 0.3    # –ú–µ–Ω—å—à–µ –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç–∏
top_p = 0.8         # –ë–æ–ª–µ–µ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ
top_k = 20          # –ú–µ–Ω—å—à–µ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
```

#### **–î–ª—è –¥–ª–∏–Ω–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤:**
```python
max_tokens = 600     # –ë–æ–ª—å—à–µ —Ç–æ–∫–µ–Ω–æ–≤
repeat_penalty = 1.2 # –ú–µ–Ω—å—à–µ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π
```

### **3. –£–ª—É—á—à–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞**

#### **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –¥–∏–∞–ª–æ–≥–∞:**
```python
# –í–∫–ª—é—á–∞–µ–º –±–æ–ª—å—à–µ –∏—Å—Ç–æ—Ä–∏–∏ –¥–ª—è –ª—É—á—à–µ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
MAX_HISTORY_LENGTH = 12  # –í–º–µ—Å—Ç–æ 8
```

#### **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏:**
```python
system_prompt = (
    "You are Anna, a 22-year-old shy and modest girl. "
    "You are talking to your brother and feeling conflicted emotions. "
    "Remember the story context and maintain consistency."
)
```

### **4. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–º–µ—Ä–æ–≤ (Few-shot learning)**

#### **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–º–µ—Ä–æ–≤ –≤ –ø—Ä–æ–º–ø—Ç:**
```python
examples = """
User: "–ü—Ä–∏–≤–µ—Ç, –∫–∞–∫ –¥–µ–ª–∞?"
Assistant: "–ü—Ä–∏–≤–µ—Ç... *—Å–º—É—â–µ–Ω–Ω–æ –æ–ø—É—Å–∫–∞—é –≥–ª–∞–∑–∞* –£ –º–µ–Ω—è –≤—Å–µ —Ö–æ—Ä–æ—à–æ, —Å–ø–∞—Å–∏–±–æ. –ü—Ä–æ—Å—Ç–æ... –Ω–µ–º–Ω–æ–≥–æ –Ω–µ—Ä–≤–Ω–∏—á–∞—é, —á—Ç–æ —Ç—ã –∑–¥–µ—Å—å. –ê —É —Ç–µ–±—è –∫–∞–∫ –¥–µ–ª–∞?"

User: "–ß—Ç–æ —Ç—ã –¥–µ–ª–∞–µ—à—å?"
Assistant: "*–∫—Ä–∞—Å–Ω–µ—é –∏ –æ—Ç–≤–æ—Ä–∞—á–∏–≤–∞—é—Å—å* –Ø... —è –ø—Ä–æ—Å—Ç–æ –≥–æ—Ç–æ–≤–ª—é –∑–∞–≤—Ç—Ä–∞–∫. –•–æ—Ç–µ–ª–∞ —Å–¥–µ–ª–∞—Ç—å —á—Ç–æ-—Ç–æ –ø—Ä–∏—è—Ç–Ω–æ–µ –¥–ª—è –≤—Å–µ—Ö. –¢—ã... —Ç—ã –Ω–µ –ø—Ä–æ—Ç–∏–≤?"
"""
```

### **5. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –º–æ–¥–µ–ª–∏**

#### **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ª—É—á—à–µ–π –º–æ–¥–µ–ª–∏:**
```python
# –í model_config.py
CURRENT_MODEL = "Gryphe-MythoMax-L2-13b.Q4_K_S.gguf"  # –•–æ—Ä–æ—à–∞—è –º–æ–¥–µ–ª—å
# –ò–ª–∏ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å:
# CURRENT_MODEL = "Gryphe-MythoMax-L2-13b.Q5_K_M.gguf"  # –õ—É—á—à–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ
```

#### **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ GPU —Å–ª–æ—ë–≤:**
```python
# –ë–æ–ª—å—à–µ —Å–ª–æ—ë–≤ –Ω–∞ GPU = –ª—É—á—à–µ –∫–∞—á–µ—Å—Ç–≤–æ
gpu_layers = 40  # –î–ª—è RTX 3090/4090
gpu_layers = 25  # –î–ª—è RTX 3060/3070
gpu_layers = 15  # –î–ª—è RTX 2060/3050
```

## üîß **–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–≤–µ—Ç—ã:**

### **1. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤**
```python
# –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Å —Ä–∞–∑–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
test_params = [
    {"temperature": 0.5, "top_p": 0.9},
    {"temperature": 0.7, "top_p": 0.95},
    {"temperature": 0.8, "top_p": 0.9},
]
```

### **2. –ê–Ω–∞–ª–∏–∑ –æ—Ç–≤–µ—Ç–æ–≤**
```python
# –õ–æ–≥–∏—Ä—É–π—Ç–µ –æ—Ç–≤–µ—Ç—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
LOG_CHAT_RESPONSES = True
LOG_CHAT_REQUESTS = True
```

### **3. –ò—Ç–µ—Ä–∞—Ç–∏–≤–Ω–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ**
1. –ó–∞–ø–∏—à–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã
2. –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –ø—Ä–∏—á–∏–Ω—ã
3. –ò–∑–º–µ–Ω–∏—Ç–µ –ø—Ä–æ–º–ø—Ç/–ø–∞—Ä–∞–º–µ—Ç—Ä—ã
4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Å–Ω–æ–≤–∞

## üìà **–ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞:**

### **–•–æ—Ä–æ—à–∏–π –æ—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω:**
- ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å —Ö–∞—Ä–∞–∫—Ç–µ—Ä—É –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
- ‚úÖ –ë—ã—Ç—å –ª–æ–≥–∏—á–Ω—ã–º –∏ —Å–≤—è–∑–Ω—ã–º
- ‚úÖ –ù–µ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π
- ‚úÖ –ó–∞–≤–µ—Ä—à–∞—Ç—å—Å—è –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–∏–∞–ª–æ–≥–∞

### **–ü–ª–æ—Ö–æ–π –æ—Ç–≤–µ—Ç:**
- ‚ùå –í—ã—Ö–æ–¥–∏—Ç –∏–∑ —Ä–æ–ª–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
- ‚ùå –ü–æ–≤—Ç–æ—Ä—è–µ—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
- ‚ùå –û–±—Ä—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –ø–æ–ª—É—Å–ª–æ–≤–µ
- ‚ùå –ù–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç—É
- ‚ùå –°–æ–¥–µ—Ä–∂–∏—Ç –º–Ω–æ–≥–æ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π

## üéØ **–ë—ã—Å—Ç—Ä—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:**

### **1. –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ:**
```python
# –£–≤–µ–ª–∏—á—å—Ç–µ max_tokens
DEFAULT_MAX_TOKENS = 400

# –£–ª—É—á—à–∏—Ç–µ stop tokens
DEFAULT_STOP_TOKENS = ["<|im_end|>", "Human:", "Assistant:", "###"]

# –î–æ–±–∞–≤—å—Ç–µ —á–µ—Ç–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤ –ø—Ä–æ–º–ø—Ç
"NEVER break character or mention being an AI"
```

### **2. –í —Ç–µ—á–µ–Ω–∏–µ –¥–Ω—è:**
- –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Ä–∞–∑–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è temperature (0.5-0.8)
- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Ä–∞–∑–Ω—ã–µ top_p (0.9-0.95)
- –£–≤–µ–ª–∏—á—å—Ç–µ –∏—Å—Ç–æ—Ä–∏—é –¥–∏–∞–ª–æ–≥–∞

### **3. –í —Ç–µ—á–µ–Ω–∏–µ –Ω–µ–¥–µ–ª–∏:**
- –°–æ–∑–¥–∞–π—Ç–µ –ª—É—á—à–∏–µ –ø—Ä–æ–º–ø—Ç—ã –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
- –î–æ–±–∞–≤—å—Ç–µ –ø—Ä–∏–º–µ—Ä—ã –≤ –ø—Ä–æ–º–ø—Ç—ã
- –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –≤–∞—à–µ–π –º–æ–¥–µ–ª–∏

## üîÑ **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ —É–ª—É—á—à–µ–Ω–∏–µ:**

### **–†–µ–≥—É–ª—è—Ä–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏:**
1. **–ï–∂–µ–¥–Ω–µ–≤–Ω–æ**: –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –∫–∞—á–µ—Å—Ç–≤–æ –æ—Ç–≤–µ—Ç–æ–≤
2. **–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ**: –ê–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –ª–æ–≥–∏ –∏ —É–ª—É—á—à–∞–π—Ç–µ –ø—Ä–æ–º–ø—Ç—ã
3. **–ï–∂–µ–º–µ—Å—è—á–Ω–æ**: –û–±–Ω–æ–≤–ª—è–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

### **–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞:**
```python
# –í–∫–ª—é—á–∏—Ç–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
LOG_CHAT_RESPONSES = True
LOG_CHAT_REQUESTS = True

# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞
response_quality_metrics = {
    "character_consistency": 0.95,
    "logical_coherence": 0.90,
    "completion_rate": 0.85
}
```

## üìö **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã:**

- [Prompt Engineering Guide](https://www.promptingguide.ai/)
- [MythoMax Documentation](https://huggingface.co/Gryphe/MythoMax-L2-13B)
- [Text Generation WebUI Tips](https://github.com/oobabooga/text-generation-webui/wiki)

---

**–ü–æ–º–Ω–∏—Ç–µ**: –ö–∞—á–µ—Å—Ç–≤–æ –æ—Ç–≤–µ—Ç–æ–≤ - —ç—Ç–æ –∏—Ç–µ—Ä–∞—Ç–∏–≤–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å. –ù–∞—á–Ω–∏—Ç–µ —Å –±–∞–∑–æ–≤—ã—Ö —É–ª—É—á—à–µ–Ω–∏–π –∏ –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∞–ª—å–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤! 