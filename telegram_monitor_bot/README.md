# Telegram Monitor Bot

Бот для мониторинга генерации изображений в Stable Diffusion WebUI.

## Функционал

- Мониторинг новых генераций изображений
- Отправка уведомлений в Telegram
- Форматированные сообщения с деталями генерации
- Защита от дублирования сообщений
- Гибкая настройка путей к логам

## Установка

1. Клонируйте репозиторий
2. Установите зависимости:
```bash
pip install -r requirements.txt
```

3. Создайте файл `.env` со следующими параметрами:
```env
# Обязательные параметры
BOT_TOKEN=your_bot_token
USER_ID=your_telegram_id
API_ID=your_api_id
API_HASH=your_api_hash

# Настройка путей (выберите один из вариантов)
# Вариант 1: Укажите путь к основному проекту
MAIN_PROJECT_PATH=/path/to/main/project

# Вариант 2: Укажите прямой путь к файлу логов
LOG_FILE_PATH=/path/to/generation_stats.json
```

## Запуск

```bash
python src/bot.py
```

## Использование

1. Запустите бота
2. Отправьте команду `/start`
3. Бот начнет отправлять уведомления о новых генерациях

## Настройка путей

Бот поддерживает два способа указания пути к логам:

1. **Через MAIN_PROJECT_PATH**:
   - Укажите путь к основному проекту
   - Бот автоматически найдет файл `app/utils/generation_stats.json`

2. **Через LOG_FILE_PATH**:
   - Укажите прямой путь к файлу логов
   - Используйте этот вариант, если файл находится в нестандартном месте

## Структура проекта

```
telegram_monitor_bot/
├── .env                    # Конфигурация
├── requirements.txt        # Зависимости
├── README.md              # Документация
├── src/
│   ├── __init__.py
│   ├── bot.py             # Основной файл бота
│   ├── config.py          # Конфигурация
│   └── utils/
│       ├── __init__.py
│       └── logger.py      # Утилиты для работы с логами
└── tests/
    └── __init__.py
``` 